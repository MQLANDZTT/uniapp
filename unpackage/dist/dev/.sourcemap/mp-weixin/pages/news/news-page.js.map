{"version":3,"sources":["webpack:///D:/toBeNo1/uniappProject/MultiFunctionalToolsUniapp/pages/news/news-page.nvue?152f","webpack:///D:/toBeNo1/uniappProject/MultiFunctionalToolsUniapp/pages/news/news-page.nvue?d491","webpack:///D:/toBeNo1/uniappProject/MultiFunctionalToolsUniapp/pages/news/news-page.nvue?776a","webpack:///D:/toBeNo1/uniappProject/MultiFunctionalToolsUniapp/pages/news/news-page.nvue?f9b6","uni-app:///pages/news/news-page.nvue","webpack:///D:/toBeNo1/uniappProject/MultiFunctionalToolsUniapp/pages/news/news-page.nvue?4c4a","webpack:///D:/toBeNo1/uniappProject/MultiFunctionalToolsUniapp/pages/news/news-page.nvue?bf2b"],"names":["components","uniLoadMore","noData","newsItem","props","nid","type","default","data","dataList","navigateFlag","pulling","refreshing","refreshFlag","refreshText","isLoading","loadingText","isNoData","contentdown","contentrefresh","contentnomore","created","columnId","minId","pageSize","column","methods","loadData","uni","url","success","id","newsid","article_type","datetime","title","image_url","source","comment_count","post_id","fail","complete","clearTimeout","loadMore","clear","goDetail","detail","closeItem","content","refreshData","onrefresh","onpullingdown","newGuid"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACqC;;;AAG9F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC8BxnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAQA;EACAA;IACAC;IACAC;IACAC;EACA;EACAC;IACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAAA,kDACA,qDACA,2DACA;MACAC;MACAC;MACAC;IACA,uDACA;EAEA;EACAC;IACA;IACA;MACAC;MACAC;MACAC;MACAC;IACA;IAEA;EASA;EACAC;IACAC;MAAA;MACA;QACA;MACA;MAEA;MACA;MACA;MAEA;MACAC;QACA;QACAC;QACArB;QACAsB;UACA;UACA;UACA;UAEA;YACA;cACAC;cACAC;cACAC;cACAC;cACAC;cACAC;cACAC;cACAC;cACAC;YACA;UACA;UAEA;YACA;YACA;UACA;YACA;YACA;UACA;UAEA;YACA;UACA;QACA;QACAC;UACA;YACA;UACA;QACA;QACAC;UACA;UACA;YACA;YACA;YACA;YACA;cACAC;YACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QAAA;QACAjB;UACAkB;QACA;MACA;QACAlB;UACAC;QACA;MACA;IACA;IACAkB;MAAA;MACAnB;QACAoB;QACAlB;UACA;YACA;UACA;QACA;MACA;IACA;IACAmB;MACA;QACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IAIA;IACAC;MACA;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnOA;AAAA;AAAA;AAAA;AAA84B,CAAgB,+4BAAG,EAAC,C;;;;;;;;;;;ACAl6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/news/news-page.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./news-page.nvue?vue&type=template&id=80ad9ed0&scoped=true&\"\nvar renderjs\nimport script from \"./news-page.nvue?vue&type=script&lang=js&\"\nexport * from \"./news-page.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./news-page.nvue?vue&type=style&index=0&id=80ad9ed0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80ad9ed0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/news/news-page.nvue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./news-page.nvue?vue&type=template&id=80ad9ed0&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./news-page.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./news-page.nvue?vue&type=script&lang=js&\"","<template>\n  <view class=\"page-news\">\n\t\t<!-- #ifdef APP-NVUE -->\n\t\t<list class=\"listview\">\n\t\t\t<refresh :display=\"refreshing\" @refresh=\"onrefresh\" @pullingdown=\"onpullingdown\"></refresh>\n\t\t\t<cell v-for=\"(item, index) in dataList\" :key=\"item.id\">\n\t\t\t  <news-item :newsItem=\"item\" @close=\"closeItem(index)\" @click=\"goDetail(item)\"></news-item>\n\t\t\t</cell>\n\t\t\t<cell v-if=\"isLoading || dataList.length > 4\">\n\t\t\t  <view class=\"loading-more\">\n\t\t\t    <text class=\"loading-more-text\">{{loadingText}}</text>\n\t\t\t  </view>\n\t\t\t</cell>\n\t\t</list>\n\t\t<!-- #endif -->\n\t\t<!-- #ifndef APP-NVUE -->\n\t\t<scroll-view class=\"listview\" style=\"flex: 1;\" enableBackToTop=\"true\" scroll-y @scrolltolower=\"loadMore()\">\n\t\t  <view v-for=\"(item, index) in dataList\" :key=\"item.id\">\n\t\t    <news-item :newsItem=\"item\" @close=\"closeItem(index)\" @click=\"goDetail(item)\"></news-item>\n\t\t  </view>\n\t\t  <view class=\"loading-more\" v-if=\"isLoading || dataList.length > 4\">\n\t\t    <text class=\"loading-more-text\">{{loadingText}}</text>\n\t\t  </view>\n\t\t</scroll-view>\n\t\t<!-- #endif -->\n    <no-data class=\"no-data\" v-if=\"isNoData\" @retry=\"loadMore\"></no-data>\n  </view>\n</template>\n\n<script>\n  import {\n    friendlyDate\n  } from '@/common/util.js';\n\n  import newsItem from './news-item.nvue';\n  import uniLoadMore from '@/components/uni-load-more.vue';\n  import noData from '@/components/nodata.nvue';\n\n  export default {\n    components: {\n      uniLoadMore,\n      noData,\n      newsItem\n    },\n    props: {\n      nid: {\n        type: [Number, String],\n        default: ''\n      }\n    },\n    data() {\n      return {\n        dataList: [],\n        navigateFlag: false,\n        pulling: false,\n        refreshing: false,\n        refreshFlag: false,\n        refreshText: \"\",\n        isLoading: false,\n        loadingText: '加载中...',\n        isNoData: false,\n        pulling: false,\n        angle: 0,\n        loadingMoreText: {\n          contentdown: '',\n          contentrefresh: '',\n          contentnomore: ''\n        },\n        refreshIcon: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5QTFRFcHBw3Nzct7e39vb2ycnJioqK7e3tpqam29vb////D8oK7wAAAAp0Uk5T////////////ALLMLM8AAABxSURBVHja7JVBDoAgDASrjqj//7CJBi90iyYeOHTPMwmFZrHjYyyFYYUy1bwUZqtJIYVxhf1a6u0R7iUvWsCcrEtwJHp8MwMdvh2amHduiZD3rpWId9+BgPd7Cc2LIkPyqvlQvKxKBJ//Qwq/CacAAwDUv0a0YuKhzgAAAABJRU5ErkJggg==\"\n      }\n    },\n    created() {\n      this.pullTimer = null;\n      this.requestParams = {\n        columnId: this.nid,\n        minId: 0,\n        pageSize: 10,\n        column: 'id,post_id,title,author_name,cover,published_at,comments_count'\n      };\n\n      this._isWidescreen = false;\n      // #ifdef H5\n      var mediaQueryOb = uni.createMediaQueryObserver(this)\n      mediaQueryOb.observe({\n        minWidth: 768\n      }, matches => {\n        this._isWidescreen = matches;\n      })\n      // #endif\n    },\n    methods: {\n      loadData(refresh) {\n        if (this.isLoading) {\n          return;\n        }\n\n        this.isLoading = true;\n        this.isNoData = false;\n        this.requestParams.time = new Date().getTime() + '';\n\n        var startTime = new Date();\n        uni.request({\n          // url: this.$host + 'api/news',\n          url: 'https://unidemo.dcloud.net.cn/api/news',\n          data: this.requestParams,\n          success: (result) => {\n            var endTime = new Date();\n            const data = result.data;\n            this.isNoData = (data.length <= 0);\n\n            const data_list = data.map((news) => {\n              return {\n                id: this.newGuid() + news.id,\n                newsid: news.id,\n                article_type: 1,\n                datetime: friendlyDate(new Date(news.published_at.replace(/\\-/g, '/')).getTime()),\n                title: news.title,\n                image_url: news.cover,\n                source: news.author_name,\n                comment_count: news.comments_count,\n                post_id: news.post_id\n              };\n            });\n\n            if (refresh) {\n              this.dataList = data_list;\n              this.requestParams.minId = 0;\n            } else {\n              this.dataList = this.dataList.concat(data_list);\n              this.requestParams.minId = data[data.length - 1].id;\n            }\n\n            if (this.dataList.length > 0 && this._isWidescreen && this.dataList.length <= 10) {\n              this.goDetail(this.dataList[0]);\n            }\n          },\n          fail: (err) => {\n            if (this.dataList.length == 0) {\n              this.isNoData = true;\n            }\n          },\n          complete: (e) => {\n            this.isLoading = false;\n            if (refresh) {\n              this.refreshing = false;\n              this.refreshFlag = false;\n              this.refreshText = \"已刷新\";\n              if (this.pullTimer) {\n                clearTimeout(this.pullTimer);\n              }\n              this.pullTimer = setTimeout(() => {\n                this.pulling = false;\n              }, 1000);\n            }\n          }\n        });\n      },\n      loadMore(e) {\n        this.loadData();\n      },\n      clear() {\n        this.dataList.length = 0;\n        this.requestParams.minId = 0;\n      },\n      goDetail(detail) {\n        if (this._isWidescreen) { //若为宽屏，则触发右侧详情页的自定义事件\n          uni.$emit('updateDetail', {\n            detail: encodeURIComponent(JSON.stringify(detail))\n          })\n        } else {\n          uni.navigateTo({\n            url: './detail?query=' + encodeURIComponent(JSON.stringify(detail))\n          });\n        }\n      },\n      closeItem(index) {\n        uni.showModal({\n          content: '不感兴趣？',\n          success: (res) => {\n            if (res.confirm) {\n              this.dataList.splice(index, 1);\n            }\n          }\n        })\n      },\n      refreshData() {\n        if (this.isLoading) {\n          return;\n        }\n        this.pulling = true;\n        this.refreshing = true;\n        this.refreshText = \"正在刷新...\";\n        this.loadData(true);\n      },\n      onrefresh(e) {\n        this.refreshData();\n        // #ifdef APP-NVUE\n        this.$refs.list.resetLoadmore();\n        // #endif\n      },\n      onpullingdown(e) {\n        if (this.refreshing) {\n          return;\n        }\n\n        // var angle = (e.pullingDistance) / e.viewHeight * 180;\n        // if (angle > 180) {\n        // \tangle = 180;\n        // }\n        // tab.angle = angle;\n\n        this.pulling = false;\n        if (Math.abs(e.pullingDistance) > Math.abs(e.viewHeight)) {\n          this.refreshFlag = true;\n          this.refreshText = \"释放立即刷新\";\n        } else {\n          this.refreshFlag = false;\n          this.refreshText = \"下拉可以刷新\";\n        }\n      },\n      newGuid() {\n        let s4 = function() {\n          return (65536 * (1 + Math.random()) | 0).toString(16).substring(1);\n        }\n        return (s4() + s4() + \"-\" + s4() + \"-4\" + s4().substr(0, 3) + \"-\" + s4() + \"-\" + s4() + s4() + s4()).toUpperCase();\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .no-data {\n    flex: 1;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 10;\n  }\n\n  .page-news {\n    flex: 1;\n    flex-direction: column;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  .listview {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    /* #ifndef APP-NVUE */\n    display: flex;\n    flex-direction: column;\n    /* #endif */\n    /* #ifndef MP-ALIPAY */\n    flex-direction: column;\n    /* #endif */\n  }\n\n  .refresh {\n    justify-content: center;\n  }\n\n  .refresh-view {\n    /* #ifndef APP-NVUE */\n    display: flex;\n    /* #endif */\n    width: 750rpx;\n    height: 64px;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .refresh-icon {\n    width: 32px;\n    height: 32px;\n    transition-duration: .5s;\n    transition-property: transform;\n    transform: rotate(0deg);\n    transform-origin: 15px 15px;\n  }\n\n  .refresh-icon-active {\n    transform: rotate(180deg);\n  }\n\n  .loading-icon {\n    width: 28px;\n    height: 28px;\n    margin-right: 5px;\n    color: gray;\n  }\n\n  .loading-text {\n    margin-left: 2px;\n    font-size: 16px;\n    color: #999999;\n  }\n\n  .loading-more {\n    align-items: center;\n    justify-content: center;\n    padding-top: 14px;\n    padding-bottom: 14px;\n    text-align: center;\n  }\n\n  .loading-more-text {\n    font-size: 28upx;\n    color: #999;\n  }\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./news-page.nvue?vue&type=style&index=0&id=80ad9ed0&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./news-page.nvue?vue&type=style&index=0&id=80ad9ed0&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1675910786545\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}